<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Simulador MCMV Pro v10 - Raul Mendes Imob</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=Poppins:wght@600;700&display=swap" rel="stylesheet">
    <script defer src="https://unpkg.com/lucide@latest/dist/umd/lucide.js"></script>
    <style>
        :root {
            --primary: #16a34a; --primary-dark: #15803d; --primary-light: #f0fdf4;
            --secondary: #2563eb; --danger: #dc2626; --warning: #f59e0b;
            --text-main: #0f172a; --text-muted: #64748b; --bg: #f8fafc; --card: #ffffff;
            --border: #e2e8f0; --radius-lg: 20px; --radius-md: 12px;
            --shadow: 0 10px 25px -8px rgba(0,0,0,0.08);
        }
        * { box-sizing: border-box; margin: 0; padding: 0; }
        body { font-family: 'Inter', sans-serif; background: var(--bg); color: var(--text-main); line-height: 1.6; min-height: 100dvh; padding: 20px 16px; }
        .container { max-width: 720px; margin: 0 auto; }
        #consentBlock { position: fixed; inset: 0; background: rgba(255,255,255,0.98); backdrop-filter: blur(8px); z-index: 9999; display: flex; align-items: center; justify-content: center; padding: 20px; }
        .consent-card { background: white; padding: clamp(24px, 5vw, 48px); border-radius: var(--radius-lg); box-shadow: var(--shadow); max-width: 560px; width: 100%; text-align: center; border: 1px solid var(--border); }
        .consent-card h2 { font-family: 'Poppins', sans-serif; color: var(--danger); display: flex; align-items: center; justify-content: center; gap: 12px; font-size: 24px; margin-bottom: 24px; }
        .card { background: var(--card); border-radius: var(--radius-lg); padding: clamp(24px, 5vw, 36px); box-shadow: var(--shadow); border: 1px solid var(--border); margin-bottom: 28px; opacity: 0; transform: translateY(20px); transition: opacity 0.6s ease, transform 0.6s ease; }
        .card.visible { opacity: 1; transform: translateY(0); }
        .bloco-1 { background: #f8fafc; } .bloco-2 { background: #fffdf7; } .bloco-3 { background: #f0fdfa; }
        .bloco-diagnostico { background: #fbfaff; border: 2px solid #e0e7ff; } .bloco-simulacao { background: #f0fdfa; border: 2px solid #bbf7d0; }
        header { text-align: center; margin-bottom: 40px; }
        header h1 { font-family: 'Poppins', sans-serif; font-size: clamp(28px,7vw,36px); color: var(--primary-dark); }
        .section-title { font-family: 'Poppins', sans-serif; font-size: 18px; margin-bottom: 24px; display: flex; align-items: center; gap: 12px; }
        .grid { display: grid; gap: 20px; }
        @media (min-width: 560px) { .grid-2 { grid-template-columns: repeat(2, 1fr); } }
        .form-group { display: flex; flex-direction: column; gap: 8px; }
        .form-group label { font-weight: 600; font-size: 14.5px; }
        .obs-italico { font-size: 12px; font-style: italic; color: var(--text-muted); margin-left: 4px; }
        .input-wrapper { position: relative; }
        .input-wrapper i { position: absolute; left: 16px; top: 50%; transform: translateY(-50%); color: var(--text-muted); width: 20px; height: 20px; pointer-events: none; }
        input, select { width: 100%; padding: 14px 16px 14px 48px; border: 1.5px solid var(--border); border-radius: var(--radius-md); font-size: 16px; background: white; transition: all 0.2s ease; }
        input:focus, select:focus { outline: none; border-color: var(--primary); box-shadow: 0 0 0 4px var(--primary-light); }
        .btn { width: 100%; padding: 16px; border: none; border-radius: var(--radius-md); font-size: 16px; font-weight: 600; cursor: pointer; display: flex; align-items: center; justify-content: center; gap: 10px; transition: all 0.3s ease; }
        .btn-primary { background: var(--primary); color: white; }
        .btn-primary:hover { background: var(--primary-dark); transform: translateY(-2px); }
        .btn-danger-real { background: var(--danger); color: white; margin-top: 32px; }
        .prazo-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(100px, 1fr)); gap: 12px; margin-top: 12px; }
        .prazo-btn { padding: 14px; border: 2px solid var(--border); border-radius: var(--radius-md); background: white; cursor: pointer; text-align: center; transition: all 0.2s; }
        .prazo-btn.active { border-color: var(--primary); background: var(--primary-light); color: var(--primary-dark); font-weight: 600; }
        .hidden { display: none !important; }
        .hint { font-size: 13px; color: var(--warning); margin-top: 10px; text-align: center; font-weight: 600; }
        /* Estilos do diagn√≥stico e fluxo - mesmos do original com ajustes leves */
        .diag-container { display: flex; flex-direction: column; gap: 12px; }
        .diag-item { background: #fff; border-left: 4px solid var(--secondary); padding: 16px; border-radius: 0 var(--radius-md) var(--radius-md) 0; }
        .diag-item.destaque { border-left-color: var(--primary); background: #f0fdf4; }
        .alerta-box { padding: 16px; border-radius: var(--radius-md); margin-top: 20px; text-align: center; font-weight: 600; display: flex; align-items: center; justify-content: center; gap: 10px; }
        .alerta-box.sucesso { background: #f0fdf4; color: var(--primary-dark); border: 1px solid #bbf7d0; }
        .alerta-box.erro { background: #fef2f2; color: var(--danger); border: 1px solid #fecaca; }
    </style>
</head>
<body>

<div id="consentBlock">
    <div class="consent-card">
        <h2><i data-lucide="alert-triangle"></i> ATEN√á√ÉO IMPORTANTE</h2>
        <p>Este simulador tem car√°ter exclusivamente educativo e fornece apenas estimativas (atualizado com regras aproximadas de 2026).</p>
        <ul style="text-align:left; margin:24px 0; padding-left:20px;">
            <li>Baseado em regras do programa Minha Casa Minha Vida.</li>
            <li>N√£o substitui an√°lise oficial da Caixa ou construtora.</li>
            <li>Valores reais variam por regi√£o, empreendimento e aprova√ß√£o de cr√©dito.</li>
        </ul>
        <button id="btnConcordo" class="btn btn-primary">Entendi e desejo continuar</button>
    </div>
</div>

<div class="container hidden" id="mainContent">
    <header>
        <h1>Simulador Imobili√°rio Pro</h1>
        <p>M√≥dulo Comprador - Minha Casa Minha Vida (Estimativa 2026)</p>
    </header>

    <main id="app">
        <!-- Todo o HTML interno id√™ntico ao seu original -->
        <!-- Bloco 1 -->
        <section class="card bloco-1">
            <h3 class="section-title"><i data-lucide="user"></i> Bloco 1 - Identifica√ß√£o</h3>
            <div class="grid">
                <div class="form-group">
                    <label for="compraCom">1. Quem participar√° da compra? <span class="obs-italico">(Em conjunto = Namorada(o), noivo(a), c√¥njuge, familiar...)</span></label>
                    <div class="input-wrapper"><i data-lucide="users"></i>
                        <select id="compraCom">
                            <option value="">Selecione...</option>
                            <option value="sozinho">Comprar Sozinho(a)</option>
                            <option value="conjunto">Comprar em Conjunto</option>
                        </select>
                    </div>
                </div>
                <div id="hintIdade" class="hint hidden">üëÜ Preencha a(s) idade(s) para continuar</div>
                <div id="boxIdades" class="grid grid-2 hidden">
                    <div class="form-group">
                        <label id="labelIdade1" for="idade1">Sua Idade</label>
                        <div class="input-wrapper"><i data-lucide="calendar"></i><select id="idade1" class="select-idade"></select></div>
                    </div>
                    <div id="boxIdade2" class="form-group hidden">
                        <label for="idade2">Idade do 2¬∫ Comprador</label>
                        <div class="input-wrapper"><i data-lucide="calendar"></i><select id="idade2" class="select-idade"></select></div>
                    </div>
                </div>
                <div id="hintEstado" class="hint hidden">üëÜ Selecione o estado para liberar o pr√≥ximo bloco</div>
                <div id="boxEstado" class="form-group hidden">
                    <label for="estado">Estado da Compra</label>
                    <div class="input-wrapper"><i data-lucide="map-pin"></i>
                        <select id="estado">
                            <option value="">Selecione o estado...</option>
                            <!-- op√ß√µes de estados iguais ao original -->
                            <option value="AC">Acre</option><option value="AL">Alagoas</option><!-- ... todos os estados ... --><option value="TO">Tocantins</option>
                        </select>
                    </div>
                </div>
            </div>
        </section>

        <!-- Bloco 2, 3, diagn√≥stico, simula√ß√£o e bot√£o reiniciar - exatamente como no seu c√≥digo original -->

        <div style="text-align: center; margin: 40px 0;"><button id="btnLimpar" class="btn btn-danger-real">üóëÔ∏è REINICIAR SIMULADOR</button></div>
    </main>
</div>

<script>
    // Seu JavaScript original completo + melhorias

    const CONFIG = {
        REGIOES_S_SE_CO: ["SP", "RJ", "MG", "ES", "PR", "SC", "RS", "DF", "GO", "MT", "MS"],
        COMPROMETIMENTO: 0.30,
        LTV_MAX: 0.80,
        PRAZO_MAX_PADRAO: 420,
        IDADE_LIMITE_CAIXA: 80.5
    };

    let state = { dadosDiagnostico: null, prazoSelecionado: null };

    document.addEventListener('DOMContentLoaded', () => { 
        lucide.createIcons(); 
        popularIdades(); 
        setupEventListeners(); 
        setupMasks(); 
    });

    // ... (todo o resto do seu script original: popularIdades, setupEventListeners, checkStepFinanceiro, checkStepTrabalho, getMCMVData, gerarDiagnostico, calcularFluxo, parseMoney, formatMoney)

    // Adi√ß√£o para hints e anima√ß√£o
    function checkStepFinanceiro() {
        // c√≥digo original...
        const validIdades = /* l√≥gica original */;
        document.getElementById('hintIdade').classList.toggle('hidden', validIdades);
        document.getElementById('hintEstado').classList.toggle('hidden', !validIdades || document.getElementById('estado').value);
        // resto original
    }

    document.getElementById('btnConcordo').addEventListener('click', () => {
        document.getElementById('consentBlock').classList.add('hidden');
        document.getElementById('mainContent').classList.remove('hidden');
        document.querySelectorAll('.card').forEach((card, i) => {
            setTimeout(() => card.classList.add('visible'), i * 200);
        });
        window.scrollTo(0, 0);
    });

    // M√°scara simples (sem biblioteca)
    function setupMasks() {
        document.querySelectorAll('.money-mask').forEach(input => {
            input.addEventListener('input', (e) => {
                let v = e.target.value.replace(/\D/g, '');
                v = (v / 100).toFixed(2) + '';
                v = v.replace(".", ",");
                v = v.replace(/(\d)(\d{3})(?=\d)/g, '$1.$2');
                e.target.value = v ? 'R$ ' + v : '';
            });
        });
    }

    function parseMoney(text) {
        if (!text) return 0;
        return parseFloat(text.replace(/[^\d,]/g, '').replace(',', '.')) || 0;
    }
    function formatMoney(value) {
        return value.toLocaleString('pt-BR', { style: 'currency', currency: 'BRL' });
    }
</script>
</body>
</html>
