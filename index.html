<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Simulador de Juros de Obra | Raul Mendes Imob</title>
  <style>
    body {
      font-family: "Poppins", sans-serif;
      background: #f3f6fb;
      display: flex;
      flex-direction: column;
      align-items: center;
      margin: 0;
      padding: 20px;
      color: #222;
    }

    header {
      text-align: center;
      background: #ffffff;
      border-radius: 10px;
      padding: 20px;
      box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
      width: 100%;
      max-width: 500px;
    }

    header img {
      width: 100%;
      max-width: 400px;
      border-radius: 8px;
    }

    .social-icons img {
      margin: 5px;
      width: 28px;
      transition: 0.3s;
    }

    .social-icons img:hover {
      transform: scale(1.1);
    }

    .login-box, .simulador {
      background: #fff;
      border-radius: 10px;
      box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1);
      padding: 25px;
      width: 100%;
      max-width: 500px;
      margin-top: 20px;
      text-align: center;
    }

    input {
      width: 90%;
      padding: 10px;
      border: 1px solid #ccc;
      border-radius: 8px;
      margin: 8px 0;
      font-size: 16px;
      text-align: center;
    }

    button {
      width: 95%;
      padding: 10px;
      background-color: #004aad;
      color: white;
      border: none;
      border-radius: 8px;
      cursor: pointer;
      font-size: 16px;
      margin-top: 10px;
    }

    button:hover {
      background-color: #0066ff;
    }

    .resultado {
      margin-top: 15px;
      font-weight: 600;
      font-size: 18px;
      color: #004aad;
    }

    footer {
      margin-top: 25px;
      font-size: 13px;
      color: #555;
      text-align: center;
    }

    iframe {
      border-radius: 10px;
      margin-top: 20px;
    }
  </style>
</head>

<body>

  <header>
    <img src="https://i.imgur.com/0ZfRzE5.png" alt="Banner Raul Mendes Imob">
    <h2>@raulmendes.imob</h2>
    <p>Transformando o mercado imobiliÃ¡rio com tecnologia e estratÃ©gia</p>
    <div class="social-icons">
      <a href="https://www.instagram.com/raulmendes.imob" target="_blank"><img src="https://cdn-icons-png.flaticon.com/512/2111/2111463.png" alt="Instagram"></a>
      <a href="https://www.youtube.com/@raulmendesimob" target="_blank"><img src="https://cdn-icons-png.flaticon.com/512/1384/1384060.png" alt="YouTube"></a>
      <a href="https://wa.me/5599999999999" target="_blank"><img src="https://cdn-icons-png.flaticon.com/512/733/733585.png" alt="WhatsApp"></a>
    </div>
  </header>

  <div class="login-box" id="login">
    <h3>ðŸ”’ Acesso Restrito</h3>
    <p style="color:#666; font-size:14px;">
      ðŸ’¡ Dica de Senha: Nome e Sobrenome de quem te ajuda no mercado imobiliÃ¡rio â€” 10 letras
    </p>
    <input type="password" id="senha" placeholder="Digite a senha">
    <button onclick="verificarSenha()">Entrar</button>
    <p id="erro" style="color:red; display:none;">Senha incorreta. Tente novamente.</p>
  </div>

  <div class="simulador" id="simulador" style="display:none;">
    <h2>Simulador de Juros de Obra</h2>
    <input id="financiamento" type="number" placeholder="ðŸ’° Valor do Financiamento (R$)">
    <input id="taxas" type="number" placeholder="ðŸ¦ Seguros + Taxas (R$)">
    <input id="juros" type="number" step="0.01" placeholder="ðŸ“Š Juros Anual (%)">
    <input id="tr" type="number" step="0.01" placeholder="ðŸ“ˆ TR (%)">
    <input id="obra" type="number" placeholder="ðŸ—ï¸ Percentual da Obra (%)" min="0" max="100">

    <button onclick="calcular()">Calcular Parcela</button>
    <div class="resultado" id="resultado">Valor da Parcela: â€”</div>

    <button onclick="gerarPDF()">ðŸ“„ Gerar PDF (5% a 100%)</button>

    <iframe width="100%" height="200"
      src="https://www.youtube.com/embed/dQw4w9WgXcQ"
      title="Tutorial do Simulador"
      frameborder="0"
      allowfullscreen>
    </iframe>
  </div>

  <footer>
    Desenvolvido por <b>@raulmendes.imob</b> | Todos os direitos reservados
  </footer>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
  <script>
    const senhaCorreta = "raulmendes";
    const umDia = 24 * 60 * 60 * 1000;

    function verificarSenha() {
      const senha = document.getElementById("senha").value.toLowerCase().trim();
      const ultimaSessao = localStorage.getItem("ultimaSessao");
      const agora = new Date().getTime();

      if (senha === senhaCorreta) {
        localStorage.setItem("autenticado", "true");
        localStorage.setItem("ultimaSessao", agora);
        mostrarSimulador();
      } else {
        document.getElementById("erro").style.display = "block";
      }
    }

    function mostrarSimulador() {
      document.getElementById("login").style.display = "none";
      document.getElementById("simulador").style.display = "block";
    }

    window.onload = function() {
      const autenticado = localStorage.getItem("autenticado");
      const ultimaSessao = localStorage.getItem("ultimaSessao");
      const agora = new Date().getTime();

      if (autenticado && ultimaSessao && (agora - ultimaSessao < umDia)) {
        mostrarSimulador();
      } else {
        localStorage.removeItem("autenticado");
        localStorage.removeItem("ultimaSessao");
      }
    }

    function calcular() {
      const financiamento = parseFloat(document.getElementById("financiamento").value) || 0;
      const taxas = parseFloat(document.getElementById("taxas").value) || 0;
      const juros = parseFloat(document.getElementById("juros").value) || 0;
      const tr = parseFloat(document.getElementById("tr").value) || 0;
      const obra = Math.min(parseFloat(document.getElementById("obra").value) || 0, 100);

      const valorParcela = financiamento * (obra / 100) *
        (1 + ((obra / 100) * (tr / 100))) *
        ((juros / 100) / 12) + taxas;

      document.getElementById("resultado").innerText =
        `Valor da Parcela: R$ ${valorParcela.toLocaleString('pt-BR', { minimumFractionDigits: 2 })}`;
    }

    async function gerarPDF() {
      const { jsPDF } = window.jspdf;
      const doc = new jsPDF();

      const financiamento = parseFloat(document.getElementById("financiamento").value) || 0;
      const taxas = parseFloat(document.getElementById("taxas").value) || 0;
      const juros = parseFloat(document.getElementById("juros").value) || 0;
      const tr = parseFloat(document.getElementById("tr").value) || 0;

      let y = 20;
      doc.setFontSize(14);
      doc.text("SimulaÃ§Ã£o - Juros de Obra", 20, y);
      y += 10;
      doc.setFontSize(10);
      doc.text(`Financiamento: R$ ${financiamento.toLocaleString('pt-BR')}`, 20, y);
      y += 8;
      doc.text(`Juros: ${juros}%  |  TR: ${tr}%  |  Taxas: R$ ${taxas}`, 20, y);
      y += 10;

      doc.text("Percentual da Obra | Valor da Parcela", 20, y);
      y += 8;

      for (let p = 5; p <= 100; p += 5) {
        const valorParcela = financiamento * (p / 100) *
          (1 + ((p / 100) * (tr / 100))) *
          ((juros / 100) / 12) + taxas;

        doc.text(`${p}%  |  R$ ${valorParcela.toLocaleString('pt-BR', { minimumFractionDigits: 2 })}`, 20, y);
        y += 8;
      }

      y += 10;
      doc.text("Desenvolvido por @raulmendes.imob", 20, y);

      doc.save("Simulacao_Juros_Obra.pdf");
    }
  </script>
</body>
</html>
